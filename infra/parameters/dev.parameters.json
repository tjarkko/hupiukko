{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "environment": { "value": "dev" },
    "appServicePlanName": { "value": "hupiukko-appserviceplan-dev" },
    "appServiceName": { "value": "hupiukko-frontend-appservice-dev" },
    "keyVaultName": { "value": "hupiukko-kv-dev" },
    "keyVaultUri": { "value": "https://hupiukko-kv-dev.vault.azure.net/" },
    "NEXT_PUBLIC_API_URL": { "value": "https://your-backend-api-url" },
    "NEXTAUTH_URL": { "value": "https://your-frontend-url" },
    "AZURE_AD_CLIENT_ID": { "value": "08716fe7-db8b-45ad-b905-7ce1b2fe0c35" },
    "AZURE_AD_TENANT_ID": { "value": "287fc32d-9911-40b2-a2c2-a6419fd5e4c9" },
    "frontendIdentityResourceIds": {
      "value": [
        "/subscriptions/<sub>/resourceGroups/<rg>/providers/Microsoft.ManagedIdentity/userAssignedIdentities/hupiukko-frontend-identity"
      ]
    },
    "managedIdentities": {
      "value": [
        {
          "name": "hupiukko-frontend-identity",
          "rbacAssignments": [
            {
              "roleDefinitionIdOrName": "b86a8fe4-44ce-4948-aee5-eccb2c155cd7",
              "roleName": "Key Vault Secrets User",
              "description": "Frontend can read secrets"
            }
          ]
        },
        {
          "name": "hupiukko-backend-identity",
          "rbacAssignments": [
            {
              "roleDefinitionIdOrName": "b86a8fe4-44ce-4948-aee5-eccb2c155cd7",
              "roleName": "Key Vault Secrets User",
              "description": "Backend can read secrets"
            },
            {
              "roleDefinitionIdOrName": "9b7fa17d-e63e-47b0-bb0a-15c516ac86ec",
              "roleName": "SQL DB Contributor",
              "description": "Backend can manage SQL server"
            }
          ]
        }
      ]
    }
  }
} 